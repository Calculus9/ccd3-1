!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).ccd3=t.ccd3||{})}(this,(function(t){"use strict";function i(t,i){this._data=t||this._data,this._option=i||this._option,this.render()}class s{constructor(t){this._Class=t}init(t,s){const o=new(0,this._Class)(t,s);return[o,(t,s)=>i.call(o,t,s)]}}const o=new class{constructor(){this._strategies=new Map}registerStrategy(t,i){try{if(this._strategies.has(t))throw new Error(`The [${chartkey}] has been registered.Please change the name and re register.`);return this._strategies.set(t,new s(i)),this}catch(t){console.error(t)}}useStrategy(t,i){try{const{name:s}=i;if("string"!=typeof s)throw new Error("The [name] attribute must be included in option.[name] is used to indicate a chart.");if(!this._strategies.has(s))throw new Error(`The [${s}] chart doesn't exist in the chart factory.`);return this._strategies.get(s).init(t,i)}catch(t){console.error(t)}}};function a(){const{name:t,layout:{margin:i,zoom:s}}=this._option;this._name=t,this._margin={top:i.top,right:i.right,bottom:i.bottom,left:i.left},this._zoom=s}function e(){this._container=d3.select(`#${this._domId}`).append("div").attr("id",`${this._domId}Container`).classed("ccd3-chart-container",!0).style("width","100%").style("height","100%").style("position","relative")}function n(){this._width=this._container.node().clientWidth,this._height=this._container.node().clientHeight,this._innerHeight=this._height-this._margin.top-this._margin.bottom,this._innerWidth=this._width-this._margin.left-this._margin.right,this._viewBox=`0 0 ${this._width} ${this._height}`}function r(){this._svg=this._container.append("svg").attr("id",`${this._domId}Svg`).attr("class",this._name).attr("viewBox",this._viewBox)}function h(){this._svg.call(d3.zoom().on("zoom",(t=>{this._zoomGroup.attr("transform",`translate(${t.transform.x},${t.transform.y}) scale(${t.transform.k})`)})))}function c(){const{layout:{zoom:t}}=this._option;return t?(this._zoomGroup=this._svg.append("g").attr("id",`${this._domId}ZoomGroup`).attr("class","zoom-group"),h.call(this),this._zoomGroup.append("g")):this._svg.append("g")}function l(){this._mainGroup=c.call(this),this._mainGroup.attr("id",`${this._domId}MainGroup`).attr("class","main-group").attr("transform",`translate(${this._margin.left},${this._margin.top})`)}function _(){a.call(this),e.call(this),n.call(this),r.call(this),l.call(this)}function m(){this._axisBottomScale=d3.scaleBand();const{axisBottom:{key:t}}=this._option;this._axisBottomScale.domain(this._data.map((i=>i[t]))).range([0,this._innerHeight]),this._bottomScale=t=>+this._axisBottomScale(t),this._bandwidth=()=>this.bandwidth()}function d(){this._axisBottomScale=d3.scaleLinear();const{axisBottom:{key:t}}=this._option;this._axisBottomScale.domain([0,d3.max(this._data,(i=>i[t]))]).range([0,this._innerHeight]),this._bottomScale=t=>+this._axisBottomScale(t)}function g(){if(!this._option.axisBottom||!this._option.axisBottom.scale||!this._option.axisBottom.scale.name)throw new TypeError("[axisBottom] Error!");u.call(this),p.call(this)}function u(){const{axisBottom:{scale:{name:t}}}=this._option;switch(t){case"scaleBand":m.call(this);break;case"scaleLinear":d.call(this);break;default:throw new Error("Unrecognized scale name")}}function p(){(()=>{this._axisBottomGroup||(this._zoomGroup?this._axisBottomGroup=this._zoomGroup.insert("g",`#${this._domId}MainGroup`):this._axisBottomGroup=this._svg.insert("g",`#${this._domId}MainGroup`),this._axisBottomGroup.attr("id",`${this._domId}AxisBottomGroup`).attr("class","axis-bottom-group").attr("transform",`translate(${this._margin.left},${this._innerHeight+this._margin.top})`))})(),(()=>{const{axisBottom:{transition:{duration:t,ease:i}}}=this._option;this._axisBottomGroup.transition().duration(t).ease(i).call(d3.axisBottom(this._axisBottomScale))})()}function f(){}class x{constructor(t,i){this._domId=t,this._option=i,_.call(this,t,i)}render(){g.call(this),f.call(this)}}o.registerStrategy("algorithmBar",x),t.AlgorithmBar=x,t.init=(t,i)=>o.useStrategy(t,i),t.register=(t,i)=>{o.registerStrategy(t,i)},Object.defineProperty(t,"__esModule",{value:!0})}));
